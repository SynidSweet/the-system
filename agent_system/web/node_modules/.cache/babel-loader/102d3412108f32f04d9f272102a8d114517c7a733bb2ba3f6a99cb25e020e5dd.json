{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const MessageStream=_ref=>{let{messages,threadId}=_ref;const messagesEndRef=useRef(null);const containerRef=useRef(null);const autoScrollEnabled=useRef(true);const scrollToBottom=()=>{if(autoScrollEnabled.current&&messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});}};useEffect(scrollToBottom,[messages]);const handleScroll=()=>{const container=containerRef.current;if(container){const isAtBottom=Math.abs(container.scrollHeight-container.scrollTop-container.clientHeight)<5;// Small threshold for floating point precision\nautoScrollEnabled.current=isAtBottom;}};const getMessageClass=message=>{const baseClass='message';switch(message.type){case'agent_thinking':return\"\".concat(baseClass,\" message-thinking\");case'agent_tool_call':return\"\".concat(baseClass,\" message-tool-call\");case'agent_tool_result':return\"\".concat(baseClass,\" message-tool-result\");case'agent_error':return\"\".concat(baseClass,\" message-error\");case'system_message':return\"\".concat(baseClass,\" message-system\");case'user_message':return\"\".concat(baseClass,\" message-user\");case'step_mode_pause':return\"\".concat(baseClass,\" message-pause\");case'agent_started':return\"\".concat(baseClass,\" message-started\");case'agent_completed':return\"\".concat(baseClass,\" message-completed\");default:return baseClass;}};const formatToolCall=content=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"tool-call\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tool-name\",children:[\"\\uD83D\\uDD27 \",content.tool_name]}),content.tool_input&&/*#__PURE__*/_jsx(\"pre\",{className:\"tool-input\",children:JSON.stringify(content.tool_input,null,2)})]});};const formatToolResult=content=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"tool-result\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tool-status \".concat(content.success?'success':'error'),children:[content.success?'✓':'✗',\" Result\"]}),content.tool_output&&/*#__PURE__*/_jsx(\"pre\",{className:\"tool-output\",children:typeof content.tool_output==='string'?content.tool_output:JSON.stringify(content.tool_output,null,2)})]});};const renderMessageContent=message=>{const{content}=message;switch(message.type){case'agent_tool_call':return formatToolCall(content);case'agent_tool_result':return formatToolResult(content);case'agent_thinking':return/*#__PURE__*/_jsxs(\"div\",{className:\"thinking\",children:[\"\\uD83D\\uDCAD \",content.thought||content.message]});case'step_mode_pause':return/*#__PURE__*/_jsxs(\"div\",{className:\"pause-message\",children:[\"\\u23F8\\uFE0F \",content.reason||content.message,/*#__PURE__*/_jsx(\"div\",{className:\"pause-info\",children:\"Waiting for continue command...\"})]});case'agent_error':return/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[\"\\u274C Error: \",content.error||content.message]});case'agent_started':return/*#__PURE__*/_jsxs(\"div\",{className:\"agent-started\",children:[\"\\uD83D\\uDE80 Agent started: \",content.instruction||content.message,content.status&&/*#__PURE__*/_jsxs(\"div\",{className:\"agent-status\",children:[\"Status: \",content.status]})]});case'agent_completed':return/*#__PURE__*/_jsxs(\"div\",{className:\"agent-completed\",children:[\"\\u2705 Agent completed: \",content.message||content.instruction,content.status&&/*#__PURE__*/_jsxs(\"div\",{className:\"agent-status\",children:[\"Final Status: \",content.status]})]});default:const displayText=content.message||content.thought||content.instruction||(typeof content==='string'?content:JSON.stringify(content));return/*#__PURE__*/_jsx(\"div\",{className:\"message-text\",children:displayText});}};const filteredMessages=messages.filter(m=>m.tree_id===threadId);if(filteredMessages.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"message-stream empty\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No messages yet for this thread\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-hint\",children:\"Messages will appear here as agents work on tasks\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"message-stream\",ref:containerRef,onScroll:handleScroll,children:[filteredMessages.map((message,index)=>/*#__PURE__*/_jsxs(\"div\",{className:getMessageClass(message),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-agent\",children:message.agent_name||'System'}),/*#__PURE__*/_jsx(\"span\",{className:\"message-time\",children:new Date(message.timestamp).toLocaleTimeString()}),/*#__PURE__*/_jsx(\"span\",{className:\"message-type\",children:message.type.replace('agent_','').replace('_',' ')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:renderMessageContent(message)})]},\"\".concat(message.task_id,\"-\").concat(message.timestamp,\"-\").concat(index))),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]});};export default MessageStream;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}